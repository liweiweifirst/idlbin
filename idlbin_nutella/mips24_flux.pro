pro mips24_flux
;x = [833,580]
;y = [708,800]


y = [853.63142,902.28399,924.39879,749.69184,611.47432,782.86405,961.8852,1048.1329,1150.9668,1126.6405,1052.5559,996.16314]

x = [979.58,821.46,678.82,498.59,577.09,686.56,689.88,433.35,749.48,779.33,856.74,930.82,532.75,633.38,674.29,1050.2]

;x = [582.62]
;y = [896.75]

x=[979.58912,821.46828,582.6284,678.82779,498.59215,894.44713,577.0997,686.56798,689.8852,433.35347,749.48338,779.33837,856.74018,930.82477,532.75831,633.38066,674.29305,1050.2447,756.22961,887.81269,739.6435,326.09668,542.82175,798.24773,966.32024,575.99396,977.37764,874.54381,747.38369,525.12991,483.11178,1065.8369,1132.1813,883.38973,707.57704]


y=[853.63142,902.28399,896.75529,924.39879,749.69184,498.68882,587.14804,611.47432,782.86405,863.58308,961.8852,1048.1329,1052.5559,1150.9668,1126.6405,1236.1088,1052.5559,996.16314,1191.9879,1177.6133,843.67976,789.49849,774.01813,756.32628,983.00302,994.06042,720.9426,662.33837,551.76435,626.95468,696.61631,788.39275,907.81269,876.85196,514.16918]

good = [0,1,3,4,8,9,11,14,21,28,29,31,33]
y = y[good]
x = x[good]

bcd=readfits('/Users/jkrick/spitzer/mips/mips24/Combine/mosaic_nonan.fits',hd)
cov=readfits('/Users/jkrick/spitzer/mips/mips24/Combine/mosaic_cov.fits')
work=bcd
;work(where(bcd NE bcd))=15.4931
;work(where(cov LT 25))=15.4931
back=readfits('/Users/jkrick/spitzer/mips/mips24/Combine/background.fits')
;print, work[x,y], back[x,y], work[x,y]- back[x,y]

;work=work-back


aper,work,x,y,flux,eflux,sky,skyerr,1,5,[9,12],[0,0],/flux

; convert to microJy, assume 1.699 aperture correction, p.37 of MIPS data handbook
flux_24=flux*33.846*1.7


print, flux_24

rms = sqrt( (total(flux_24)) / (n_elements(flux_24)))
print, 'rms', rms
end
